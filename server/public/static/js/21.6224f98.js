webpackJsonp([21],{M6qa:function(e,a,t){"use strict";function n(e){t("m7d3")}Object.defineProperty(a,"__esModule",{value:!0});var r=t("r4Fr"),i=t("oAV5"),s={data:function(){return{showMode:"card",packageData:[],cardTotle:0,page:1,tableData:[],token:sessionStorage.getItem("adminToken")?sessionStorage.getItem("adminToken"):localStorage.getItem("adminToken")}},mounted:function(){this.getUCC(),this.getCardPackage()},filters:{leftType:function(e){var a="";switch(e){case 1:a="全能";break;case 2:a="兵攻";break;case 3:a="盾防";break;case 4:a="速度";break;case 5:a="爱心"}return a},cry:function(e){var a="";switch(e){case 1:a="红";break;case 2:a="蓝";break;case 3:a="绿";break;case 4:a="光";break;case 5:a="暗"}return a},rightType:function(e){var a="";switch(e){case 1:a="物";break;case 2:a="魔";break;case 3:a="防";break;case 4:a="治";break;case 5:a="妨";break;case 6:a="支";break;case 7:a="特"}return a}},methods:{showModeChange:function(e){this.showMode=e},cardPageChange:function(){this.getUCC()},watchCard:function(e){this.$alert('<div class="watch_img"><img src="'+e+'" /></div>',"查看卡牌",{dangerouslyUseHTMLString:!0,lockScroll:!1,customClass:"wm_crearchcard_watch"})},getCardPackage:function(){var e=this;r.a.searchcardpackage({all:!0,sortType:"default"}).then(function(a){0==a.data.code?e.$message.error(a.data.msg):1==a.data.code&&(e.packageData=a.data.data,e.packageData=Object(i.g)(e.packageData,a.data.sortData,"default"))})},checkUCC:function(e,a,t){var n=this;if(!t&&0!=t&&e)return this.$message.error("请设置卡包"),!1;e?this.$confirm("确定通过吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",lockScroll:!1,type:"warning"}).then(function(){r.a.adminCreatcard({token:n.token,type:"check",packageId:t,id:a,pass:e}).then(function(e){0==e.data.code?n.$message.error(e.data.msg):1==e.data.code&&(n.$message({message:e.data.msg,type:"success"}),n.getUCC())})}).catch(function(){}):this.$prompt("请输入驳回理由","提示",{confirmButtonText:"确定",cancelButtonText:"取消",lockScroll:!1}).then(function(i){var s=i.value;r.a.adminCreatcard({token:n.token,type:"check",packageId:t,id:a,pass:e,mark:s}).then(function(e){0==e.data.code?n.$message.error(e.data.msg):1==e.data.code&&(n.$message({message:e.data.msg,type:"success"}),n.getUCC())})}).catch(function(){})},adminSearchcard:function(e,a){var t=this;r.a.adminSearchcard(e).then(function(e){0==e.data.code?t.$message.error(e.data.msg):1==e.data.code&&(t.tableData[a].likeCardList=e.data.data,t.tableData[a].likeTotal=e.data.totle)})},openLikeCard:function(e){this.tableData[e].likePage=1,this.tableData[e].likeCard=!0;var a={star:"0",cry:"0",rightType:"0",leftType:"0",title:"",name:this.tableData[e].likeKeyWord,token:this.token,page:this.tableData[e].likePage,packageId:"-1"};this.adminSearchcard(a,e)},reSearchLikeCard:function(e){this.tableData[e].likePage=1;var a={star:"0",cry:"0",rightType:"0",leftType:"0",title:"",name:this.tableData[e].likeKeyWord,token:this.token,page:this.tableData[e].likePage,packageId:"-1"};this.adminSearchcard(a,e)},likeCardPage:function(e,a){var t={star:"0",cry:"0",rightType:"0",leftType:"0",title:"",name:this.tableData[a].likeKeyWord,token:this.token,page:this.tableData[a].likePage,packageId:"-1"};this.adminSearchcard(t,a)},openInfo:function(e){this.tableData[e].likeCard=!1},getUCC:function(){var e=this;r.a.adminCreatcard({token:this.token,type:"get",page:this.page}).then(function(a){if(0==a.data.code)e.$message.error(a.data.msg);else if(1==a.data.code){var t=a.data.data;t.forEach(function(e,a){e.likeCard=!1,e.likeKeyWord=e.name,e.likeCardList=[],e.likePage=1,e.likeTotal=0,t[a]=e}),e.tableData=t,e.cardTotle=a.data.total}})}}},c=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"wmcard_admincenter_common_right_body"},[t("div",{staticClass:"mb15"},[t("div",{directives:[{name:"show",rawName:"v-show",value:"card"===e.showMode,expression:"showMode === 'card'"}],staticClass:"dib"},[t("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-s-unfold"},on:{click:function(a){return e.showModeChange("table")}}})],1),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:"table"===e.showMode,expression:"showMode === 'table'"}],staticClass:"dib"},[t("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-s-grid"},on:{click:function(a){return e.showModeChange("card")}}})],1)]),e._v(" "),"table"===e.showMode?t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,"current-row-key":"_id"}},[t("el-table-column",{attrs:{prop:"email",label:"邮箱"}}),e._v(" "),t("el-table-column",{attrs:{prop:"nickName",label:"昵称"}}),e._v(" "),t("el-table-column",{attrs:{prop:"name",label:"卡牌名"}}),e._v(" "),t("el-table-column",{attrs:{prop:"title",label:"出处"}}),e._v(" "),t("el-table-column",{attrs:{prop:"star",label:"星级"}}),e._v(" "),t("el-table-column",{attrs:{label:"被动属性"},scopedSlots:e._u([{key:"default",fn:function(a){return[e._v("\n        "+e._s(e._f("leftType")(a.row.leftType))+"\n      ")]}}],null,!1,2515096900)}),e._v(" "),t("el-table-column",{attrs:{label:"主动技能"},scopedSlots:e._u([{key:"default",fn:function(a){return[e._v("\n        "+e._s(e._f("rightType")(a.row.rightType))+"\n      ")]}}],null,!1,515263236)}),e._v(" "),t("el-table-column",{attrs:{label:"水晶"},scopedSlots:e._u([{key:"default",fn:function(a){return[e._v("\n        "+e._s(e._f("cry")(a.row.cry))+"\n      ")]}}],null,!1,724125188)}),e._v(" "),t("el-table-column",{attrs:{label:"通过"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("div",[e._v(e._s(a.row.pass?"已通过":"未通过"))])]}}],null,!1,1447716189)}),e._v(" "),t("el-table-column",{attrs:{label:"卡包",width:"150"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-select",{staticClass:"wm_card_package_sel",attrs:{placeholder:"选择卡包",disabled:!!a.row.check},model:{value:a.row.packageId,callback:function(t){e.$set(a.row,"packageId",t)},expression:"scope.row.packageId"}},e._l(e.packageData,function(e){return t("el-option",{key:e.packageId,attrs:{label:e.name,value:e.packageId}})}),1)]}}],null,!1,4137068124)}),e._v(" "),t("el-table-column",{attrs:{label:"审核"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("div",[e._v(e._s(a.row.check?"已审核":"未审核"))])]}}],null,!1,2341069994)}),e._v(" "),t("el-table-column",{attrs:{width:"140",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(a){return[0===a.row.check?t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.checkUCC(!0,a.row._id,a.row.packageId)}},nativeOn:{keydown:function(a){if(!a.type.indexOf("key")&&e._k(a.keyCode,"enter",13,a.key,"Enter"))return null;a.preventDefault()}}},[e._v("通过")]):e._e(),e._v(" "),0===a.row.check?t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.checkUCC(!1,a.row._id,a.row.packageId)}},nativeOn:{keydown:function(a){if(!a.type.indexOf("key")&&e._k(a.keyCode,"enter",13,a.key,"Enter"))return null;a.preventDefault()}}},[e._v("驳回")]):e._e(),e._v(" "),0===a.row.check?t("el-tooltip",{attrs:{placement:"left"}},[t("div",{attrs:{slot:"content"},slot:"content"},[t("img",{staticClass:"wm_admin_cardpass_watchcard",attrs:{src:"/userCreatCard/"+a.row._id+".jpg"}})]),e._v(" "),t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.watchCard("/userCreatCard/"+a.row._id+".jpg")}},nativeOn:{keydown:function(a){if(!a.type.indexOf("key")&&e._k(a.keyCode,"enter",13,a.key,"Enter"))return null;a.preventDefault()}}},[e._v("卡面")])],1):e._e(),e._v(" "),1===a.row.check&&1===a.row.pass?t("el-tooltip",{attrs:{placement:"left"}},[t("div",{attrs:{slot:"content"},slot:"content"},[t("img",{staticClass:"wm_admin_cardpass_watchcard",attrs:{src:"/card/"+a.row.packageId+"/"+a.row.cardId+".jpg"}})]),e._v(" "),t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.watchCard("/card/"+a.row.packageId+"/"+a.row.cardId+".jpg")}},nativeOn:{keydown:function(a){if(!a.type.indexOf("key")&&e._k(a.keyCode,"enter",13,a.key,"Enter"))return null;a.preventDefault()}}},[e._v("卡面")])],1):e._e()]}}],null,!1,2840536695)})],1):e._e(),e._v(" "),"card"===e.showMode?t("div",{staticClass:"tc wm_admin_cardpass_item_body"},e._l(e.tableData,function(a,n){return t("el-card",{key:n,staticClass:"dib m5 wm_admin_cardpass_item_box",class:{nopass:1===a.check&&0===a.pass,passed:1===a.check&&1===a.pass,nocheck:0===a.check}},[t("div",{staticClass:"wm_admin_cardpass_item"},[t("div",{staticClass:"wm_admin_cardpass_item_img_body"},[0===a.check?t("div",{key:"creatCard"},[t("img",{key:a._id,staticClass:"wm_admin_cardpass_item_img",attrs:{src:"/userCreatCard/"+a._id+".jpg"}})]):1===a.check&&1===a.pass?t("div",{key:"packageCard"},[t("img",{key:a._id,staticClass:"wm_admin_cardpass_item_img",attrs:{src:"/card/"+a.packageId+"/"+a.cardId+".jpg"}})]):t("div",{key:"nocard"},[t("img",{key:a._id,staticClass:"wm_admin_cardpass_item_img",attrs:{src:"/static/img/back.jpg"}})])]),e._v(" "),a.likeCard?e._e():t("div",{staticClass:"wm_admin_cardpass_item_info_box tl"},[t("p",[t("span",{staticClass:"dib wm_admin_cardpass_item_info_label"},[e._v("邮箱：")]),e._v(" "+e._s(a.email))]),e._v(" "),t("p",[t("span",{staticClass:"dib wm_admin_cardpass_item_info_label"},[e._v("昵称：")]),e._v(" "+e._s(a.nickName))]),e._v(" "),t("p",[t("span",{staticClass:"dib wm_admin_cardpass_item_info_label"},[e._v("卡牌名：")]),e._v(" "+e._s(a.name))]),e._v(" "),t("p",[t("span",{staticClass:"dib wm_admin_cardpass_item_info_label"},[e._v("出处：")]),e._v(" "+e._s(a.title))]),e._v(" "),t("p",[t("span",{staticClass:"dib wm_admin_cardpass_item_info_label"},[e._v("星级：")]),e._v(" "+e._s(a.star))]),e._v(" "),t("p",[t("span",{staticClass:"dib wm_admin_cardpass_item_info_label"},[e._v("被动属性：")]),e._v(" "+e._s(e._f("leftType")(a.leftType))+"("),t("img",{attrs:{src:"/static/otherImg/creatcard/leftType/"+a.leftType+".png",width:"16px",height:"16px"}}),e._v(")")]),e._v(" "),t("p",[t("span",{staticClass:"dib wm_admin_cardpass_item_info_label"},[e._v("主动技能：")]),e._v(" "+e._s(e._f("rightType")(a.rightType))+"("),t("img",{attrs:{src:"/static/otherImg/creatcard/rightType/"+a.rightType+".png",width:"16px",height:"16px"}}),e._v(")")]),e._v(" "),t("p",[t("span",{staticClass:"dib wm_admin_cardpass_item_info_label"},[e._v("水晶：")]),e._v(" "+e._s(e._f("cry")(a.cry))+"("),t("img",{attrs:{src:"/static/otherImg/creatcard/cry/"+a.cry+".png",width:"16px",height:"16px"}}),e._v(")")]),e._v(" "),t("p",[t("span",{staticClass:"dib wm_admin_cardpass_item_info_label"},[e._v("卡包：")]),e._v(" "),t("el-select",{staticClass:"wm_card_package_sel",attrs:{placeholder:"选择卡包",disabled:!!a.check},model:{value:a.packageId,callback:function(t){e.$set(a,"packageId",t)},expression:"item.packageId"}},e._l(e.packageData,function(e){return t("el-option",{key:e.packageId,attrs:{label:e.name,value:e.packageId}})}),1)],1),e._v(" "),t("p",[t("span",{staticClass:"dib wm_admin_cardpass_item_info_label"},[e._v("审核：")]),e._v(" "),a.check?a.pass?t("el-tag",{key:"pass",attrs:{type:"success"}},[e._v("已通过")]):t("el-tag",{key:"nopass",attrs:{type:"info"}},[e._v("未通过")]):t("el-tag",{key:"nocheck",attrs:{type:"danger"}},[e._v("未审核")])],1)]),e._v(" "),a.likeCard?t("div",{staticClass:"wm_admin_cardpass_item_like_box tl"},[t("div",{staticClass:"wm_admin_cardpass_item_like_keyword"},[t("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入内容",size:"mini"},model:{value:a.likeKeyWord,callback:function(t){e.$set(a,"likeKeyWord",t)},expression:"item.likeKeyWord"}},[t("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:function(a){return e.reSearchLikeCard(n)}},slot:"append"})],1)],1),e._v(" "),t("div",{staticClass:"mt5 mb5 wm_admin_cardpass_item_likecardlst_box"},[t("el-row",{attrs:{gutter:5}},e._l(a.likeCardList,function(a,n){return t("el-col",{key:a._id+n,staticClass:"mb5",attrs:{span:6}},[t("div",[t("el-tooltip",{key:a._id,attrs:{placement:"right",enterable:!1,"open-delay":300}},[t("div",{attrs:{slot:"content"},slot:"content"},[t("img",{staticClass:"wm_admin_cardpass_watchcard",attrs:{src:e.$wikimoecard.url+a.packageId+"/"+a.cardId+".jpg"}})]),e._v(" "),t("img",{key:a.cardId,attrs:{src:e.$wikimoecard.url+a.packageId+"/"+a.cardId+".jpg",width:"100%"}})])],1)])}),1)],1),e._v(" "),t("div",[t("el-pagination",{attrs:{small:"",layout:"prev, pager, next",total:a.likeTotal,"current-page":a.likePage,"pager-count":5,"page-size":50},on:{"update:currentPage":function(t){return e.$set(a,"likePage",t)},"update:current-page":function(t){return e.$set(a,"likePage",t)},"current-change":function(a){return e.likeCardPage(a,n)}}})],1)]):e._e()]),e._v(" "),t("div",{staticClass:"wm_admin_cardpass_item_info_btn_body mt10 tr"},[t("el-button",{directives:[{name:"show",rawName:"v-show",value:!a.likeCard,expression:"!item.likeCard"}],attrs:{size:"mini",type:"info"},on:{click:function(a){return e.openLikeCard(n)}},nativeOn:{keydown:function(a){if(!a.type.indexOf("key")&&e._k(a.keyCode,"enter",13,a.key,"Enter"))return null;a.preventDefault()}}},[e._v("查询同名卡牌")]),e._v(" "),t("el-button",{directives:[{name:"show",rawName:"v-show",value:a.likeCard,expression:"item.likeCard"}],attrs:{size:"mini",type:"info"},on:{click:function(a){return e.openInfo(n)}},nativeOn:{keydown:function(a){if(!a.type.indexOf("key")&&e._k(a.keyCode,"enter",13,a.key,"Enter"))return null;a.preventDefault()}}},[e._v("查看卡牌信息")]),e._v(" "),0===a.check?t("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.checkUCC(!0,a._id,a.packageId)}},nativeOn:{keydown:function(a){if(!a.type.indexOf("key")&&e._k(a.keyCode,"enter",13,a.key,"Enter"))return null;a.preventDefault()}}},[e._v("通过")]):e._e(),e._v(" "),0===a.check?t("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.checkUCC(!1,a._id,a.packageId)}},nativeOn:{keydown:function(a){if(!a.type.indexOf("key")&&e._k(a.keyCode,"enter",13,a.key,"Enter"))return null;a.preventDefault()}}},[e._v("驳回")]):e._e()],1)])}),1):e._e(),e._v(" "),t("el-pagination",{staticClass:"wmcard_user_page",attrs:{small:"",layout:"prev, pager, next",total:e.cardTotle,"current-page":e.page,"page-size":20},on:{"current-change":e.cardPageChange,"update:currentPage":function(a){e.page=a},"update:current-page":function(a){e.page=a}}})],1)},l=[],o={render:c,staticRenderFns:l},d=o,_=t("VU/8"),p=n,m=_(s,d,!1,p,null,null);a.default=m.exports},k6z3:function(e,a,t){a=e.exports=t("FZ+f")(!1),a.push([e.i,"\n.wm_admin_cardpass_watchcard {\r\n  width: 396px;\r\n  height: 556px;\n}\n.wm_admin_cardpass_item_box {\r\n  width: calc(49% - 14px);\r\n  max-width: 850px;\n}\n.wm_admin_cardpass_item_box.nopass {\r\n  border: 1px solid #000;\r\n  -webkit-box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.1);\r\n          box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.1);\n}\n.wm_admin_cardpass_item_box.passed {\r\n  border: 1px solid #67c23a;\r\n  -webkit-box-shadow: 0 2px 12px 0 rgba(103, 194, 58, 0.1);\r\n          box-shadow: 0 2px 12px 0 rgba(103, 194, 58, 0.1);\n}\n.wm_admin_cardpass_item_box.nocheck {\r\n  border: 1px solid #ff4c4c;\r\n  -webkit-box-shadow: 0 2px 12px 0 rgba(255, 76, 76, 0.1);\r\n          box-shadow: 0 2px 12px 0 rgba(255, 76, 76, 0.1);\n}\n.wm_admin_cardpass_item {\r\n  display: -webkit-box;\r\n  display: -ms-flexbox;\r\n  display: flex;\n}\n.wm_admin_cardpass_item_img {\r\n  width: 100%;\r\n  height: auto;\n}\n.wm_admin_cardpass_item_info_box .wm_card_package_sel {\r\n  line-height: 26px;\n}\n.wm_admin_cardpass_item_box .el-input__inner {\r\n  height: 26px;\n}\n.wm_admin_cardpass_item_box .el-input__icon {\r\n  line-height: 26px;\n}\n.wm_admin_cardpass_item_box .el-tag {\r\n  height: 26px;\r\n  line-height: 26px;\n}\n.wm_admin_cardpass_item_box .el-pagination {\r\n  line-height: 18px;\r\n  text-align: center;\n}\n.wm_admin_cardpass_item_info_box,\r\n.wm_admin_cardpass_item_like_box {\r\n  border-radius: 10px;\r\n  border: 1px solid #ccc;\r\n  padding: 15px;\r\n  -webkit-box-sizing: border-box;\r\n          box-sizing: border-box;\r\n  margin-left: 10px;\r\n  font-size: 14px;\r\n  line-height: 32px;\r\n  word-break: break-all;\r\n  -webkit-box-flex: 1;\r\n      -ms-flex-positive: 1;\r\n          flex-grow: 1;\n}\n.wm_admin_cardpass_item_body {\r\n  min-width: 1294px;\r\n  overflow: auto;\n}\n.wm_admin_cardpass_item_info_label {\r\n  width: 80px;\r\n  font-weight: bold;\n}\n.wm_admin_cardpass_item_like_keyword {\r\n  width: 100%;\n}\n.wm_admin_cardpass_item_likecardlst_box {\r\n  height: 356px;\r\n  overflow-y: auto;\r\n  overflow-x: hidden;\n}\n.wm_admin_cardpass_item_img_body {\r\n  -ms-flex-negative: 0;\r\n      flex-shrink: 0;\r\n  width: 325px;\n}\r\n",""])},m7d3:function(e,a,t){var n=t("k6z3");"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);t("rjj0")("f827ac3c",n,!0,{})}});